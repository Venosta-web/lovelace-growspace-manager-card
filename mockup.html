
<!DOCTYPE html>
<html>
<head>
  <title>Growspace Manager Mockup</title>
  <style>
    body { background-color: #1a1a1a; color: white; font-family: 'Roboto', sans-serif; margin: 0; padding: 20px; }
    /* Mock CSS Variables usually provided by HA */
    :root {
      --primary-color: #4CAF50;
      --accent-color: #FFC107;
      --primary-text-color: #ffffff;
      --secondary-text-color: #9e9e9e;
      --card-background-color: #1e1e1e;
      --growspace-card-bg: rgba(30, 30, 35, 0.6);
      --plant-border-color-default: #4caf50;
      --divider-color: rgba(255,255,255,0.12);
    }
  </style>
  <!-- Import the built card -->
  <script type="module" src="/dist/growspace-manager-card.js"></script>
</head>
<body>
  <div id="root">
     <growspace-manager-card></growspace-manager-card>
  </div>

  <script type="module">
    const card = document.querySelector('growspace-manager-card');

    // Mock Hass Object
    const mockHass = {
      states: {
         'sensor.growspaces_list': {
             attributes: {
                 growspaces: {
                     'gs1': 'Growspace 1'
                 }
             }
         }
      },
      callApi: async () => [],
      callService: async (domain, service, data) => {
         console.log('Service called:', domain, service, data);
      },
      config: { time_zone: 'UTC' }
    };

    // Wait for card to be defined
    customElements.whenDefined('growspace-manager-card').then(() => {
        card.hass = mockHass;
        card.setConfig({ type: 'custom:growspace-manager-card' });

        // Wait for update
        card.updateComplete.then(() => {
            // Manually open strain library in editor mode with a dummy image
            card._strainLibraryDialog = {
                open: true,
                view: 'editor',
                strains: [],
                searchQuery: '',
                editorState: {
                    strain: 'Test Strain',
                    phenotype: '',
                    breeder: '',
                    type: 'Indica',
                    flowering_min: '',
                    flowering_max: '',
                    lineage: '',
                    sex: '',
                    description: '',
                    image: 'https://via.placeholder.com/800x600.png?text=Test+Image', // Placeholder image
                    image_crop_meta: { x: 20, y: 20, scale: 1.5 } // Initial crop
                }
            };
            card.requestUpdate();
        });
    });
  </script>
</body>
</html>
